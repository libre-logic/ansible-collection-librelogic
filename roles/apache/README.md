# librelogic.librelogic.apache


This role will install and configure the [Apache](https://en.wikipedia.org/wiki/Apache_HTTP_Server) webserver:

- [mod_md](https://httpd.apache.org/docs/2.4/mod/mod_md.html) for [Let's Encrypt](https://en.wikipedia.org/wiki/Let's_Encrypt) SSL/TLS certificate management, hardened ([A+](https://www.ssllabs.com/ssltest/)) SSL/TLS configuration
- (optional) `mod_evasive` to mitigate basic DoS attack attempts


## Requirements/Dependencies/Example playbook

- See [meta/main.yml](meta/main.yml)
- For Let's Encrypt certificates, ports tcp/80 and tcp/443 must be reachable from the Internet, and the each virtualhost's FQDN (ServerName) must have a A or CNAME record in the public DNS system.


```yaml
- hosts: my.CHANGEME.org
  roles:
     - librelogic.librelogic.common # optional
     - librelogic.librelogic.monitoring # optional
     - librelogic.librelogic.apache
```

See [defaults/main.yml](defaults/main.yml) for all configuration variables

_Note: On Ubuntu 18.04 certificate generation with `mod_md` is currently broken [[1]](https://github.com/icing/mod_md/issues/68) [[2]](https://bugs.launchpad.net/ubuntu/+source/libapache2-mod-md/+bug/1843693). Do not use the `MDomain` directive in your apache configuration on this distribution - you must implement cerificat generation using a separate procedure/tool (such as `certbot`)._

## Usage

**Backups:** You may backup the `/etc/apache2/md` directory which contains all keys/certificates generated by Let's Encrypt

## License

[GNU GPLv3](../../LICENSE)


## References

- https://github.com/nodiscc/xsrv/tree/master/roles/apache
